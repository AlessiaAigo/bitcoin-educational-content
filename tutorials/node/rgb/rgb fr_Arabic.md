# مقدمة موجزة عن بروتوكول RGB

في الثالث من يناير عام 2009، قام ساتوشي ناكاموتو بإطلاق أول عقد بيتكوين، ومنذ ذلك الحين، انضمت عقد جديدة وبدأ بيتكوين في التصرف كما لو كانت شكلاً جديدًا من الحياة، شكلاً من الحياة الذي لا يتوقف عن التطور، وببطء تحول إلى أكثر شبكة آمنة في العالم بفضل تصميمها الفريد والمدروس جيدًا من قبل ساتوشي، حيث يجذب المستخدمين المعروفين بالمنقبين للاستثمار في الطاقة وقوة الحساب، مما يساهم في أمان الشبكة.

بينما يستمر بيتكوين في النمو والتبني، يواجه مشاكل في التوسع. تسمح شبكة بيتكوين لعقد جديد يحتوي على معاملات بأن يتم تعدينه في حوالي 10 دقائق. بفرض أن لدينا 144 عقدة في اليوم مع قيم قصوى لعدد المعاملات في العقدة الواحدة تصل إلى 2700 معاملة، فإن بيتكوين لن يسمح سوى بـ 4.5 معاملة في الثانية. كان ساتوشي على علم بهذا القيد، يمكننا رؤيته في بريد إلكتروني1 أرسله إلى مايك هيرن في مارس 2011 حيث شرح كيف يعمل ما نعرفه اليوم بأنه قناة الدفع. مايكروبيمنتس بسرعة وأمان دون الانتظار للتأكيدات. هنا تأتي دور البروتوكولات الخارجة عن السلسلة.

وفقًا لكريستيان ديكر2، فإن البروتوكولات الخارجة عن السلسلة عمومًا هي أنظمة يستخدم فيها المستخدمون البيانات من سلسلة الكتل ويديرونها دون لمس السلسلة نفسها حتى اللحظة الأخيرة. استنادًا إلى هذا المفهوم، تم إنشاء شبكة البرق، وهي شبكة تستخدم البروتوكولات الخارجة عن السلسلة لتمكين دفعات بيتكوين تقريبًا فورية، وبما أن جميع هذه العمليات لا تُكتب على سلسلة الكتل، فإنها تسمح بآلاف المعاملات في الثانية وتوسع بيتكوين.

أفتح البحث والتطوير في مجال البروتوكولات الخارجة عن السلسلة في بيتكوين صندوق باندورا، واليوم نعلم أنه يمكننا تحقيق أكثر من نقل القيمة بشكل لامركزي، وتركز المنظمة غير الربحية LNP/BP Standards على تطوير بروتوكولات الطبقة 2 و 3 على بيتكوين وشبكة البرق، ومن بين هذه المشاريع يبرز RGB.

## ما هو RGB؟

ظهر RGB من بحوث بيتر تود3 حول الأختام الفريدة للاستخدام والتحقق من العميل، والتي صاغتها جياكومو زوكو والمجتمع في الفترة من 2016 إلى 2019 إلى أفضل بروتوكول للأصول في بيتكوين وشبكة البرق. وقد أدت تطور هذه الأفكار فيما بعد إلى تطوير RGB إلى نظام عقود ذكية كامل بواسطة ماكسيم أورلوفسكي، الذي يعمل على تنفيذه منذ عام 2019 بمشاركة المجتمع.
يمكننا تعريف RGB كمجموعة من بروتوكولات مفتوحة المصدر تتيح لنا تنفيذ عقود ذكية معقدة بطريقة قابلة للتطوير وسرية. إنها ليست شبكة محددة (مثل بيتكوين أو لايتنينغ)؛ ببساطة، تعتبر كل عقد ذكي مجموعة من المشاركين في العقد الذين يمكنهم التفاعل باستخدام قنوات اتصال مختلفة (افتراضيًا، شبكة لايتنينغ). يستخدم RGB سلسلة كتل بيتكوين كطبقة للتزام الحالة ويحتفظ بشفرة العقد الذكي والبيانات خارج السلسلة، مما يجعله قابلاً للتطوير، من خلال استغلال معاملات بيتكوين (والسكريبت) كنظام للتحكم في الملكية للعقود الذكية؛ بينما يتم تحديد تطور العقد الذكي بواسطة مخطط خارج السلسلة، ومن المهم أخيرًا أن نلاحظ أن كل شيء يتم التحقق منه على الجانب العميل.

ببساطة، يعد RGB نظامًا يتيح للمستخدم مراجعة عقد ذكي وتنفيذه والتحقق منه فرديًا في أي وقت دون تكلفة إضافية، حيث لا يستخدم سلسلة كتل مثلما يفعل الأنظمة "التقليدية". تم تقديم أنظمة العقود الذكية المعقدة بواسطة إيثيريوم، ولكن بسبب حاجة المستخدم لإنفاق كميات كبيرة من الغاز لكل عملية، لم تصل أبدًا إلى القابلية للتطوير الموعودة، مما يجعلها أبدًا خيارًا للمستخدمين المستبعدين من النظام المالي الحالي.

حاليًا، تروج صناعة سلسلة الكتل لضرورة تخزين شفرة العقود الذكية والبيانات في سلسلة الكتل وتنفيذها بواسطة كل عقد، بغض النظر عن زيادة الحجم المفرط أو سوء استخدام موارد الحوسبة. يعتبر النمط المقترح من قبل RGB أكثر ذكاءً وكفاءة حيث يكسر معادلة سلسلة الكتل من خلال فصل العقود الذكية والبيانات عن سلسلة الكتل، وبالتالي تجنب اكتظاظ الشبكة المشاهد على منصات أخرى. بالإضافة إلى ذلك، فإنه لا يجبر كل عقد على تنفيذه كل عقد، ولكن بدلاً من ذلك، يتم ذلك بواسطة الأطراف المعنية، مما يضيف سرية لم يسبق لها مثيل.

![RGB vs Ethereum](assets/1.png)

## العقود الذكية في RGB

في RGB، يقوم مطور العقود الذكية بتحديد مخطط يحدد القواعد التي يتطور بها العقد مع مرور الوقت. يعد المخطط المعيار لبناء العقود الذكية في RGB، ويجب على المرسل عند تعريف عقد للإصدار ومحفظة أو بورصة أن تلتزم بمخطط معين يجب عليها التحقق من العقد ضده. فقط إذا كان التحقق صحيحًا، يمكن لكل طرف قبول الطلبات والعمل مع الأصول.
عقد ذكي في RGB هو رسم بياني موجه غير دوري لتغييرات الحالة، حيث يتم معرفة جزء فقط من الرسم البياني في كل مرة ولا يوجد وصول إلى الباقي. يعد RGB مجموعة من القواعد الأساسية لتطور هذا الرسم البياني الذي يبدأ به العقد الذكي. يمكن لكل مشارك في العقد إضافة قواعد إلى هذه القواعد (إذا سمحت القواعد بذلك) ويتم بناء الرسم البياني الناتج من تطبيق متكرر لهذه القواعد.

## الأصول القابلة للتبادل

تتبع الأصول القابلة للتبادل في RGB المواصفة LNPBP RGB-20، عند تعريف RGB-20، يتم توزيع بيانات الأصل المعروفة باسم "بيانات النشأة" عبر شبكة Lightning، والتي تحتوي على ما يلزم لاستخدام الأصل. أبسط شكل للأصول لا يسمح بالإصدار الثانوي، أو تدمير الرموز، أو إعادة التسمية، أو الاستبدال.

في بعض الأحيان، قد يحتاج المصدر إلى إصدار المزيد من الرموز في المستقبل، على سبيل المثال العملات المستقرة مثل USDT، التي تحافظ على قيمة كل رمز مرتبطة بقيمة عملة تضخمية مثل الدولار الأمريكي. لهذا الغرض، توجد مخططات RGB-20 أكثر تعقيدًا، وبالإضافة إلى بيانات النشأة، تتطلب من المصدر إنتاج إرسالات، التي ستتداول أيضًا عبر شبكة Lightning؛ من خلال هذه المعلومات، يمكننا معرفة إجمالي العرض المتداول للأصل. ينطبق الأمر نفسه على الأصول المحروقة أو تغيير اسمها.

يمكن أن تكون معلومات الأصل عامة أو خاصة: إذا كان المصدر يتطلب السرية، فيمكنه اختيار عدم مشاركة معلومات حول الرمز وإجراء العمليات بسرية تامة، ولكن لدينا أيضًا الحالة المعاكسة حيث يحتاج المصدر والمالكون إلى أن يكون كل العملية شفافة. يتم ذلك عن طريق مشاركة بيانات الرمز.

## إجراءات RGB-20

إجراء التدمير يعطل الرموز، ولا يمكن استخدام الرموز المحروقة بعد ذلك.

إجراء الاستبدال يحدث عندما يتم حرق الرموز ويتم إنشاء كمية جديدة من نفس الرمز. يسمح هذا بتقليل حجم البيانات التاريخية للأصل، وهو أمر مهم للحفاظ على سرعة الأصل.

لدعم حالة الاستخدام حيث يمكن حرق الأصول دون الحاجة إلى استبدالها، يتم استخدام مخطط فرعي لـ RGB-20 يسمح فقط بحرق الأصول.

## الأصول غير القابلة للتبادل
الأصول غير القابلة للاستبدال (NFT) في RGB تتبع المواصفة LNPBP RGB-21. عندما نعمل مع NFT ، لدينا أيضًا مخطط رئيسي ومخطط فرعي. هذه المخططات لديها إجراء للحفر ، مما يتيح لنا إرفاق بيانات مخصصة بواسطة مالك الرمز. أكثر المثال الشائع الذي نراه اليوم في NFT هو الفن الرقمي المرتبط بالرمز. يمكن لمرسل الرمز منع هذا الحفر للبيانات باستخدام RGB-21 الفرعي. على عكس أنظمة NFT الأخرى في سلسلة الكتل ، يتيح RGB توزيع بيانات رمز وسائط كبيرة الحجم بشكل لامركزي ومقاوم للرقابة ، باستخدام تمديد لشبكة P2P Lightning يسمى Bifrost ، والتي تستخدم أيضًا لبناء العديد من الميزات الأخرى للعقد الذكي المحددة لـ RGB.
بالإضافة إلى الأصول القابلة للاستبدال و NFT ، يمكن استخدام RGB و Bifrost لإنتاج أشكال أخرى من العقود الذكية ، بما في ذلك DEX ومجموعات السيولة وعملات الاستقرار الخوارزمية ، وما إلى ذلك ، والتي سنناقشها في مقالات مستقبلية.

## NFT من RGB مقابل NFT من منصات أخرى

- لا حاجة لتخزين مكلف على سلسلة الكتل
- لا حاجة لـ IPFS ، بدلاً من ذلك يتم استخدام تمديد لشبكة Lightning (يسمى Bifrost) (وهو مشفر تمامًا من البداية إلى النهاية)
- لا حاجة لحل إدارة بيانات خاص - مرة أخرى ، يقوم Bifrost بهذا الدور
- لا حاجة للوثوق بمواقع الويب للحفاظ على بيانات NFT أو أصول / ABI للعقد
- تشفير DRM مدمج وإدارة الملكية
- بنية النسخ الاحتياطي باستخدام شبكة Lightning (Bifrost)
- وسائل لتحقيق الربح من المحتوى (ليس فقط بيع الرمز نفسه ، ولكن أيضًا الوصول إلى المحتوى مرات متعددة)

## الاستنتاجات

منذ إطلاق بيتكوين قبل حوالي 13 عامًا ، تم إجراء الكثير من البحوث والتجارب في هذا المجال ، ونجاحات وأخطاء أتاحت لنا فهمًا أفضل قليلاً لسلوك الأنظمة المركزية في الممارسة ، وما يجعلها حقًا مركزية وما الإجراءات التي تميل إلى أن تؤدي إلى التركيز. كل هذا أدى بنا إلى استنتاج أن اللامركزية الحقيقية هي ظاهرة نادرة وصعبة التحقيق ، وتم تحقيق اللامركزية الحقيقية فقط من خلال بيتكوين ، ولهذا السبب نركز جهودنا على بنائه.

RGB لديه حفرته الخاصة في حفرة الأرنب بيتكوين ، وأثناء سقوطي من خلالها ، سأنشر ما تعلمته ، في المقالة القادمة ، سنقدم مقدمة لعقد LNP و RGB وكيفية استخدامها.

- 1 https://plan99.net/~mike/satoshi-emails/thread4.html
- 2 https://btctranscripts.com/chaincode-labs/chaincode-residency/2018-10-22-christian-decker-history-of-lightning/
- 3 https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2016-June/012773.html- 4 https://github.com/LNP-BP/LNPBPs/blob/master/lnpbp-0020.md

- 5 https://github.com/LNP-BP/LNPBPs/blob/master/lnpbp-0021.md

# دليل RGB-node

## مقدمة

في هذا الدليل، سنشرح كيفية استخدام RGB-node لإنشاء رمز قابل للتبادل ونقله. يستند هذا الوثيقة إلى تجربة RGB-node ويختلف في أن هذا الدليل يستخدم بيانات حقيقية من شبكة الاختبار ولذلك، يجب علينا بناء معاملة بيتكوين جزئياً موقعة (PSBT) الخاصة بنا، وسنشير إليها فيما بعد بـ psbt.

## المتطلبات

يُوصى باستخدام توزيعة لينكس، تم كتابة هذا الدليل باستخدام Pop!/\_OS، وهي مبنية على أوبونتو وستحتاج إلى:

- cargo
- Bitcoin core
- git

ملاحظة: يُظهر هذا الدليل تنفيذ أوامر في واجهة سطر الأوامر في لينكس، ولتمييز ما يكتبه المستخدم والرد الذي يحصل عليه في واجهة سطر الأوامر، نضع الرمز $ لتمثيل سطر الأوامر bash.

ستحتاج إلى تثبيت بعض الاعتماديات:

```
$ sudo apt install -y build-essential pkg-config libzmq3-dev libssl-dev libpq-dev libsqlite3-dev cmake
```

التجميع والتشغيل

RGB-node قيد التطوير (WIP)، ولذلك يجب أن نتحديد نقطة معينة (3f3c520c19d84c66d430e76f0fc68c5a66d79c84) لكي نتمكن من تجميعه واستخدامه بشكل صحيح، لذا نقوم بتنفيذ الأوامر التالية.

```
$ git clone https://github.com/rgb-org/rgb-node.git
$ cd rgb-node
$ git checkout 3f3c520c19d84c66d430e76f0fc68c5a66d79c84
```

ثم نقوم بتجميعه، لا تنس استخدام العلم --locked لأن هناك تغيير رئيسي تم إدخاله في إصدار من clap.

```
$ cargo install --path . --all-features --locked

....
....
    Finished release [optimized] target(s) in 2m 14s
  Installing /home/user/.cargo/bin/fungibled
  Installing /home/user/.cargo/bin/rgb-cli
  Installing /home/user/.cargo/bin/rgbd
  Installing /home/user/.cargo/bin/stashd
   Installed package `rgb_node v0.4.2 (/home/user/dev/rgb-node)` (executables `fungibled`, `rgb-cli`, `rgbd`, `stashd`)

```

كما يشير مُترجم Rust، تم نسخ البرامج الثنائية إلى المجلد $HOME/.cargo/bin، إذا قام المترجم بنسخها في مكان آخر، يجب التأكد من أن هذا المجلد مُضاف إلى $PATH.
من بين البرامج الثنائية المثبتة، يمكننا رؤية ثلاثة شياطين أو خدمات (الملفات التي تنتهي بـ d) وواجهة سطر الأوامر (cli)، وتسمح لنا واجهة سطر الأوامر بالتفاعل مع الشيطان الرئيسي rgbd. نظرًا لأننا سنقوم في هذا البرنامج التعليمي بتشغيل عقدتين، سنحتاج أيضًا إلى عميلين، يجب على كل منهما الاتصال بعقده الخاص به، لذلك سنقوم بإنشاء اسمين مستعارين.

```
alias rgb0-cli="$HOME/.cargo/bin/rgb-cli -d $HOME/rgbdata/data0 -n testnet"
alias rgb1-cli="$HOME/.cargo/bin/rgb-cli -d $HOME/rgbdata/data1 -n testnet"
```

يمكننا ببساطة تشغيل الأسماء المستعارة أو إضافتها في نهاية الملف $HOME/.bashrc وتشغيل source $HOME/.bashrc.
فرضية

لا يدير RGB-node أي وظائف متعلقة بالمحفظة، بل يقوم بمهام محددة لـ RGB على البيانات التي ستتم تزويدها من قبل محفظة خارجية مثل بيتكوين كور. على وجه الخصوص، لتوضيح سير العمل الأساسي مع الإصدار والتحويل، سنحتاج إلى:

- issuance_utxo الذي سيربط rgb-node-0 به الأصل الجديد المصدر.
- receive_utxo حيث يتلقى rgb-node-1 الأصل.
- change_utxo حيث يتلقى rgb-node-0 التغيير في الأصل.
- معاملة بيتكوين موقعة جزئيًا (tx.psbt)، سيتم ضبط مخرج المفتاح العمومي ليشمل التزام التحويل.
  سنستخدم واجهة سطر الأوامر لبيتكوين الأساسية، يجب أن يكون برنامج bitcoind قيد التشغيل على testnet، وسيمنحنا هذا التشغيل المشتركية وفي النهاية سنتمكن من إرسال أصولنا الخاصة إلى مستخدمين آخرين لـ RGB الذين قاموا بمتابعة هذا البرنامج التعليمي.
  لتبسيط الأمور، سنضيف هذا الاسم المستعار في نهاية ملفنا ~/.bashrc.

```
alias bcli="bitcoin-cli -testnet"
```

لنقم بإدراج المعاملات الغير مستنفدة واختيار اثنين منها، واحدة ستكون issuance_utxo والأخرى change_utxo، لا يهم أي واحد هو أي واحد، المهم أن المصدر يكون لديه السيطرة على هاتين الـ UTXO.

```
$ bcli listunspent
[
  {
    "txid": "4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893",
    "vout": 1,
    "address": "tb1qn4w9u5x0hxgm30hx6q2rhdwz58xr4ekqdq0vgm",
    "label": "",
    "scriptPubKey": "00149d5c5e50cfb991b8bee6d0143bb5c2a1cc3ae6c0",
    "amount": 0.01703963,
    "confirmations": 62432,
    "spendable": true,
    "solvable": true,
"desc": "wpkh([ec924f82/0'/0'/5']031e0fc9a03e69326c3deeabfd749a7f7b094e3151ada90cd13019efac663c5663)#dj7rhpdt",    "safe": true
  },
  {
    "txid": "cd66d3b77dfc1c2ecf958847c16a8a1311bba84ee7bf9dd55592a7b97b13028f",
    "vout": 1,
    "address": "tb1qyd537gf0xmm9ehmhaf3nv0a230crg56mhp9ap3",
    "scriptPubKey": "001423691f212f36f65cdf77ea63363faa8bf034535b",
    "amount": 0.02877504,
    "confirmations": 189184,
    "spendable": true,
    "solvable": true,
    "desc": "wpkh([ec924f82/0'/1'/0']03ae333417e86840145e95ab2852c8f7ca8b8f82cd910883f7ce0c69649403cef2)#jlcj23vw",
    "safe": true
  }
]
```

قبل أن نذهب أبعد من ذلك، يجب أن نتحدث عن الـ outpoints. يمكن أن تحتوي صفقة واحدة على عدة مخرجات، ويتضمن الـ outpoint كل من TXID المكون من 32 بايتًا ورقم فهرس المخرج المكون من 4 بايتات (vout) للإشارة إلى مخرج محدد منفصل بواسطة علامة النقطتين :. في قائمة الـ unspent الخاصة بنا، يمكننا أن نجد اثنين من UTXOs، وعلى كل منهما يمكننا أن نرى txid و vout، وهذه هي الـ outpoints issuance_utxo و change_utxo.
'receive_utxo' هو UTXO يتحكم به المستلم، في هذه الحالة، سنستخدم e40d9037e31d3f440552b30af16e764cf25ffda3899b4851cc4e38fd64718b09:0 وهو outpoint من محفظة أخرى.

- issuance_utxo: 4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1
- change_utxo: cd66d3b77dfc1c2ecf958847c16a8a1311bba84ee7bf9dd55592a7b97b13028f:1
- receive_utxo: e40d9037e31d3f440552b30af16e764cf25ffda3899b4851cc4e38fd64718b09:0

الآن سنقوم بإنشاء صفقة جزئيًا موقعة (tx.psbt) وسيتم ضبط المخرج لتشمل التزام نقل، لا تنسى استبدال txid و vout بالخاصة بك، ولا يهم حقًا عنوان الوجهة، يمكن أن يكون لك أو لشخص آخر، لا يهم إلى أين ستذهب هذه الـ sats، المهم هو أننا نستخدم issuance_utxo.
$ bcli walletcreatefundedpsbt "[{/"txid/":/"4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893/",/"vout/":1}]" "[{/"tb1q9crtjp0y6rt00c4fcrmuamrylzkcalcxls80j9/":/"0.00050000/"}]"{
  "psbt": "cHNidP8BAHECAAAAAZM4E58uD9auiZ7esJkFbmD5p/7PcgBTn5UwiQ0hhRdMAQAAAAD/////ArM7GQAAAAAAFgAU4xQr/g1lgG2P9+gZudpFD8mOGGRQwwAAAAAAABYAFC4GuQXk0Nb34qnA987sPitjv8GAAAAAAABAHECAAAAAYiK0TdTiaEs4oDovRokqspfLZr5EHYH8Pnj/Tv5GFB5AQAAAAD+////Av8Bh80AAAAAFgAUsLjOd30aRkUna41LAT5c3CnAz5obABoAAAAAABYAFJ1cXlDPuZG4vubQFDu1wqHMOubAyw8gAAEBHxsAGgAAAAAAFgAUnVxeUM+5kbi+5tAUO7XCocw65sAiBgMeD8mgPmkybD3uq/10mn97CU4xUa2pDNEwGe+sZjxWYxDskk+CAAAAgAAAAIAFAACAACICA2J21wOqW6bj7/ePTVI7QGvU6e4Sk8DhN5pmd9hrwSd7EOyST4IAAACAAQAAgAcAAIAAAA==",
  "fee": 0.00000280,
  "changepos": 0'
```

تم توفير ملف psbt مشفر بترميز base64 وسنستخدمه لإنشاء ملف tx.psbt.
$ echo "cHNidP8BAHECAAAAAZM4E58uD9auiZ7esJkFbmD5p/7PcgBTn5UwiQ0hhRdMAQAAAAD/////ArM7GQAAAAAAFgAU4xQr/g1lgG2P9+gZudpFD8mOGGRQwwAAAAAAABYAFC4GuQXk0Nb34qnA987sZPitjv8GAAAAAAABAHECAAAAAYiK0TdTiaEs4oDovRokqspfLZr5EHYH8Pnj/Tv5GFB5AQAAAAD+////Av8Bh80AAAAAFgAUsLjOd30aRkUna41LAT5c3CnAz5obABoAAAAAABYAFJ1cXlDPuZG4vubQFDu1wqHMOubAyw8gAAEBHxsAGgAAAAAAFgAUnVxeUM+5kbi+5tAUO7XCocw65sAiBgMeD8mgPmkybD3uq/10mn97CU4xUa2pDNEwGe+sZjxWYxDskk+CAAAAgAAAAIAFAACAACICA2J21wOqW6bj7/ePTVI7QGvU6e4Sk8DhN5pmd9hrwSd7EOyST4IAAACAAQAAgAcAAIAAAA==" | base64 -d > tx.psbt```

لنقم بإنشاء مجلد جديد يسمى rgbdata ونخزن فيه مجلدات البيانات الخاصة بكل عقدة.

```
$ mkdir $HOME/rgbdata
$ cd $HOME/rgbdata
```

بمجرد أن نكون في $HOME/rgbdata، نقوم بتشغيل كل عقدة في نوافذ ترمنال مختلفة، حيث يكون ~/.cargo/bin هو المجلد الذي نسخ فيه cargo جميع الثنائيات بعد تثبيت rgb-node.

```
$ rgbd -vvvv -b ~/.cargo/bin -d ./data0 -n testnet
$ rgbd -vvvv -b ~/.cargo/bin -d ./data1 -n testnet
```

## الإصدار

لإصدار أصل، نقوم بتشغيل rgb0-cli مع أوامر الإصدار القابل للتبادل، ثم الوسائط، ورمز USDT، واسم "USD Tether"، وفي التخصيص، سنستخدم مبلغ الإصدار والـ issuance_utxo كما هو موضح أدناه:

```
$ rgb0-cli fungible issue USDT "USD Tether" 1000@4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1
```

تم إصدار الأصل بنجاح. استخدم هذه المعلومات للمشاركة:
معلومات الأصل:
نحصل على معرف الأصل، ونحتاجه لتحويل الأصل.

```
$ rgb0-cli fungible list

- name: USD Tether
  id: rgb1tadqzve7vwfh39sl6gvqenp8wegsrzreekhhu0dhthx08ppzj9wq8p0je6
  ticker: USDT
```

## إنشاء UTXO معتمة

لكي يتمكن rgb-node-1 من استقبال ال USDT الجديدة، يجب أن ينشئ UTXO معتمة تتوافق مع receive_utxo لتحتوي على الأصل.
$ rgb1-cli fungible blind e40d9037e31d3f440552b30af16e764cf25ffda3899b4851cc4e38fd64718b09:0
النقطة المعمية: utxob16az597vp5nkr66nfzsykf8ngdnvzep5050rm00l7vv8wm7vew4jqj7jhhf
سر العمى للنقطة المعمية: 1679197189805229975

لكي نتمكن من قبول التحويلات المرتبطة بهذه UTXO ، سنحتاج إلى receive_utxo الأصلية وعامل العمى.

## التحويل

لنقل كمية معينة من الأصل إلى rgb-node-1 ، يجب أن نرسلها إلى النقطة المعمية ، يجب على rgb-node-0 إنشاء إرسال وكشف ، والتحقق منه في عملية تحويل بيتكوين. بعد ذلك ، سنحتاج إلى psbt سنقوم بتعديله لتضمين الالتزام. بالإضافة إلى ذلك ، تسمح لنا الخيارات -i و -a بتوفير نقطة الإدخال التي ستكون مصدر الأصل وتخصيص حيث سنتلقى العملة المعادة ، يجب علينا تحديدها على النحو التالي @<change_utxo>.

```
'$ rgb0-cli fungible transfer utxob16az597vp5nkr66nfzsykf8ngdnvzep5050rm00l7vv8wm7vew4jqj7jhhf 100 rgb1tadqzve7vwfh39sl6gvqenp8wegsrzreekhhu0dhthx08ppzj9wq8p0je6 tx.psbt consignment.rgb disclosure.rgb witness.psbt -i 4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1 -a 900@cd66d3b77dfc1c2ecf958847c16a8a1311bba84ee7bf9dd55592a7b97b13028f:1
تمت عملية التحويل بنجاح ، وتمت كتابة الإرسالات والكشفات في "consignment.rgb" و "disclosure.rgb" ، والمعاملة الجزئية الموقعة جزئيًا في "witness.psbt".'
بيانات التسجيل المراد مشاركتها: consignment1qxz4g7ec6da33llaxe97u9hx8p9wcgp2yv46ycudwy7ytjf4gdh88x6upcdmjfy3mp4y0n669j5ar5y6e04zfr7255kynff6eymx9tdfc7jux5jk6tgn4xm6lttlh3lh08070ltuh60l07mamlns2qyy984mg4m5dz0x6s5sy5edls2zjlmnvw708sh7fy2vuph745jcpgp92qrw27s73vm4ghrx57vammyf8wautwu5euujd8w3dupdtgp4px36gz8z0ywnuty45uqdwk672qqzjp3j77yl7urft6gewqksqgppczezn5c7gyux6gzgpye0wgyjp85ufdqlzy5cd8zwfg3q9550xq2hyf24qqz92wqskpgq8qsr8kp5p9dt49evmqlze9ylrx2sqpwpvpqp45lpvgjkgk542pks9850w5jquq3qqsj4xsqn9nu6w30lgpmrhdqs6jj0ez3myhj74kp223f0wg2y7vupczdq5pa23mzhzc6l647nl6ftrru0mjrh739yhgztsdhl2cdmhf0qm7du9n20up4rnnsp0tlp8665xldkq9z9u85tgh6nxmkfg3pc6wzk2t90pekj2d6l0km09vyt4vut24vhzg9qhrdsgr7dws828p6ejk7ddy0zkz3a2fq5648664w3se2egwvh904lzmpnc7a7wy4fayznunt6j4ndmm68y24tjje4qxnxs70w4lr9vz9q9qca903edtjd6c5f37jagafsqnhnlsuwvnqwc7uly4dw2rnlyxp4zcfqrfpkpez54c0lc3tmvppmv06ge97heevgt0acrq0ezgjr6ck9waqpanypl8dzrqdzjd05h735tdgv2wjjjucheur40h4wjw4pcdpc8pqlh7ef95rj2al8v3eexkgty8j2ne7kk2zxpe0wypq8ra0x76rt6cu00cw4w05v0u3ng6zhfrttz2c3m5nx64s8w98wa26dx79jwhne44gp9lmg6vkhxq98meslyr4zqtxjsg27xzj80m0csd77lr047vwycvdw0z8mwudm3uvlry9p9da4su72k9q84pphw4n0fyeet0ujzrdgacm6p777jun0y0v397mp4drafr6q7994kdl96m388xp6ggf5arn4d4ed53rv9tlkerckqvkng92uhdvngwcl3m6yqhxdjjnkca62tckxfnrae4cx4e6wx6ww5649v4hvuwkkajanllc38wavqy83xhn555l708354nt2quscchexsxjgezdxfnmxgue0cn4ktghd6xd2le76k5cw3t0p0nurs4h5rjz0j7twj9ulwkp7cmhhgl23r7g677gk36r5jw8panh2sq5966m08sa5632egd5ms6h0e504dtwskct3x6a93uutaumtc8aam8yyt66lrmrhcssw9ga2yg0496s6sdmaexa49064g3syc888egnwa8racrwwwwemknqamarpqlmqa5mg8zgt0dts8ehuwmgz4j3cjltr8gv78e7p84zm8pylann7dmss5suf4htqc04qx5trnk59m305ah2qp4mvkxwy6ts84sa30d80jzk9s6n40e4j8dcvq79ncg5e3z5g4esxyawmxk7lvm5efc30vtw8qqhe9xx3773djez6hjjx0x962z2radnvdmazkrmlqw7guxz29qvahcx79h33ncqhzhvekwaqqnrz3wxnp2qy3u83zdgdcgq27n5n22h7jjedrh28m8c6mn42xhfjasm5njsxtufqjxefnhc2n5zr0um0xlqk62cu25cjwuwwrcv3e4vhh2tdzn8rnlaefj98fvslg7sun95wpt2a4vcg4ua62v97aeqstvjegmlem5crnsamrhm3a2pcma2s22atr43lgx9vh7kn9lzymfe83a4vhe9rc6xl5pmy5hjw4t88k0fwh6lzmjtjvqtczq47ny7hv8ytdqdy2c7ce3gegnufkzwphkwtz6xqzklyw7e7f76fwfewfuyqal7dl8r9476jerrl40mav38sun2u8jvftw33x3r20dmeka34znmkgaz29ppk5hz3ldttw8zyz4k6q0gts8utqh53tuc7vtajl26rq2fnxr0vxcwlx9rfvn6v8ar8c73qkc3zca4mlgl7qu36sk7e
سيتم إنشاء ثلاثة ملفات جديدة: consignment و disclosure و psbt المتضمنة للتعديل، ويُشار إلى هذا الـ psbt بأنه "transaction témoin"، ويتم إرسال consignment إلى rgb-node-1.

## التعديل

يجب توقيع ونشر التعديل، ولذلك يجب ترميزه بتنسيق base64.

```
$ base64 -w0 witness.psbt

cHNidP8BAHECAAAAAe2pydT0BqfK5nBCdBSbm3W/vNKE/QxTr4eJcjwjDLDjAQAAAAD/////AiWbAAAAAAAAFgAUO1Bi4v2VHUJPmq5iyYhDv1tyTCcQJwAAAAAAABYAFPwfm3skdSeMnOfcDqBpgVjwuwESAAAAAAABAHECAAAAAeSwUiZ+p3/NM7yt3BAoDkm/afi//lplsffwwpTqjd+CAQAAAAD/////AlDDAAAAAAAAFgAULga5BeTQ1vfiqcD3zuxk+K2O/wbDwgAAAAAAABYAFLsvLLowx0NR5NyFKj9wl3IFvNcPAAAAAAEBH8PCAAAAAAAAFgAUuy8sujDHQ1Hk3IUqP3CXcgW81w8iBgKIYFEbYKvRj25inaA0/c0PMIZD/BFAgFbjrBJe8cZ+cxDskk+CAAAAgAEAAIADAACAACICAsnwAXsMVlPXi/2ExgqtLoIN4TncWVW0EImSo9YwyhNmEOyST4IAAACAAQAAgAUAAIAG/ANSR0IBIQLJ8AF7DFZT14v9hMYKrS6CDeE53FlVtBCJkqPWMMoTZgb8A1JHQgIgMD8j8bQGB8NgEobv3NUJr7aERA/FkGgQ5w2KwF+daDgAAA==
```

قم بتوقيعه باستخدام الأمر الفرعي walletprocesspsbt.

```
$ bcli walletprocesspsbt "cHNidP8BAHECAAAAAe2pydT0BqfK5nBCdBSbm3W/vNKE/QxTr4eJcjwjDLDjAQAAAAD/////AiWbAAAAAAAAFgAUO1Bi4v2VHUJPmq5iyYhDv1tyTCcQJwAAAAAAABYAFPwfm3skdSeMnOfcDqBpgVjwuwESAAAAAAABAHECAAAAAeSwUiZ+p3/NM7yt3BAoDkm/afi//lplsffwwpTqjd+CAQAAAAD/////AlDDAAAAAAAAFgAULga5BeTQ1vfiqcD3zuxk+K2O/wbDwgAAAAAAABYAFLsvLLowx0NR5NyFKj9wl3IFvNcPAAAAAAEBH8PCAAAAAAAAFgAUuy8sujDHQ1Hk3IUqP3CXcgW81w8iBgKIYFEbYKvRj25inaA0/c0PMIZD/BFAgFbjrBJe8cZ+cxDskk+CAAAAgAEAAIADAACAACICAsnwAXsMVlPXi/2ExgqtLoIN4TncWVW0EImSo9YwyhNmEOyST4IAAACAAQAAgAUAAIAG/ANSR0IBIQLJ8AF7DFZT14v9hMYKrS6CDeE53FlVtBCJkqPWMMoTZgb8A1JHQgIgMD8j8bQGB8NgEobv3NUJr7aERA/FkGgQ5w2KwF+daDgAAA=="{'
'"psbt": "cHNidP8BAHECAAAAAe2pydT0BqfK5nBCdBSbm3W/vNKE/QxTr4eJcjwjDLDjAQAAAAD/////AiWbAAAAAAAAFgAUO1Bi4v2VHUJPmq5iyYhDv1tyTCcQJwAAAAAAABYAFPwfm3skdSeMnOfcDqBpgVjwuwESAAAAAAABAHECAAAAAeSwUiZ+p3/NM7yt3BAoDkm/afi//lplsffwwpTqjd+CAQAAAAD/////AlDDAAAAAAAAFgAULga5BeTQ1vfiqcD3zuxk+K2O/wbDwgAAAAAAABYAFLsvLLowx0NR5NyFKj9wl3IFvNcPAAAAAAEBH8PCAAAAAAAAFgAUuy8sujDHQ1Hk3IUqP3CXcgW81w8BCGsCRzBEAiAZud+YVf1FyZq0IDQ+/oAE34TKypedrJGUcYx0QIpaygIgZJO7xvN0dOQXbXTRYE0QxGIWsfo85Dhwne0/whoO06kBIQKIYFEbYKvRj25inaA0/c0PMIZD/BFAgFbjrBJe8cZ+cwAiAgLJ8AF7DFZT14v9hMYKrS6CDeE53FlVtBCJkqPWMMoTZhDskk+CAAAAgAEAAIAFAACABvwDUkdCASECyfABewxWU9eL/YTGCq0ugg3hOdxZVbQQiZKj1jDKE2YG/ANSR0ICIDA/I/G0BgfDYBKG79zVCa+2hEQPxZBoEOcNisBfnWg4AAA=",  "complete": true}'
'$ bcli sendrawtransaction "02000000000101eda9c9d4f406a7cae6704274149b9b75bfbcd284fd0c53af8789723c230cb0e30100000000ffffffff02259b0000000000001600143b5062e2fd951d424f9aae62c98843bf5b724c271027000000000000160014fc1f9b7b2475278c9ce7dc0ea0698158f0bb011202473044022019b9df9855fd45c99ab420343efe8004df84caca979dac9194718c74408a5aca02206493bbc6f37474e4176d74d1604d10c46216b1fa3ce438709ded3fc21a0ed3a90121028860511b60abd18f6e629da034fdcd0f308643fc11408056e3ac125ef1c67e7300000000"
```

Cela enverra la transaction brute à travers le réseau Bitcoin pour qu'elle soit confirmée.
$ bcli sendrawtransaction "02000000000101eda9c9d4f406a7cae6704274149b9b75bfbcd284fd0c53af8789723c230cb0e30100000000ffffffff02259b0000000000001600143b5062e2fd951d424f9aae62c98843bf5b724c271027000000000000160014fc1f9b7b2475278c9ce7dc0ea0698158f0bb011202473044022019b9df9855fd45c99ab420343efe8004df84caca979dac9194718c74408a5aca02206493bbc6f37474e4176d74d1604d10c46216b1fa3ce438709ded3fc21a0ed3a90121028860511b60abd18f6e629da034fdcd0f308643fc11408056e3ac125ef1c67e7300000000"8e3787fe40b5feb3044f892e739bdb4043e10de384255a915a37725811abc3fe```

## قبول

لقبول التحويل الوارد ، يجب أن يكون rgb-node-1 قد تلقى ملف الشحن من rgb-node-0 ، ويجب أن يكون لديه receive_utxo و blinding_factor المقابل الذي تم إنشاؤه عند إنشاء UTXO المزيفة.

```
$ rgb1-cli fungible accept consignment.rgb e40d9037e31d3f440552b30af16e764cf25ffda3899b4851cc4e38fd64718b09:0 1679197189805229975

تم قبول نقل الأصول بنجاح.
```

يمكننا الآن رؤية (في حقل knownAllocations) التخصيص الجديد لـ 100 وحدة من الأصول في <receive_utxo> عن طريق تشغيل:

```
$ rgb1-cli fungible list -l

- genesis: genesis1qyfe883hey6jrgj2xvk5g3dfmfqfzm7a4wez4pd2krf7ltsxffd6u6nrvjvvnc8vt9llmp7663pgututl9heuwaudet72ay9j6thc6cetuvhxvsqqya5xjt2w9y4u6sfkuszwwctnrpug5yjxnthmr3mydg05rdrpspcxysnqvvqpfvag2w8jxzzsz9pf8pjfwf0xvln5z7w93yjln3gcnyxsa04jsf2p8vu4sxgppfv0j9qerppqxhvztpqscnjsxvq5gdfy5v6j3wvpjxxqzcerxuglngnfvpxjkgqusct7cyx8zzezcfpqv3nxjxm2kjj4d0zu0ta6fjmpr8a0calk6h88h4ap5e4nucj0ch07aa73qsh3lj5sd89a32kwy0eq7tsa5zqqjpdqvqq5s46r0
معرف: rgb1tadqzve7vwfh39sl6gvqenp8wegsrzreekhhu0dhthx08ppzj9wq8p0je6  الرمز: USDT'
الاسم: USD Tether
الوصف: ~
العرض المعروف: 1000
هل تم إصداره بشكل معروف: ~
حد الإصدار: 0
السلسلة: شبكة الاختبار
الدقة العشرية: 0
التاريخ: "2022-02-23T20:53:26"
المشاكل المعروفة:
- معرف: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
  الكمية: 1000
  المصدر: ~
التضخم المعروف: {}
التخصيصات المعروفة:
- معرف العقدة: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
  الفهرس: 0
  نقطة الخروج: "4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1"
  الكمية المكشوفة:
    القيمة: 1000
    التعتيم: "0000000000000000000000000000000000000000000000000000000000000001"
- معرف العقدة: 28f82e2dcfa91282c28a8805ff0c7fde4bd4e0bdbd40c6ba55e191666e45327b
  الفهرس: 1
  نقطة الخروج: "e40d9037e31d3f440552b30af16e764cf25ffda3899b4851cc4e38fd64718b09:0"
  الكمية المكشوفة:
    القيمة: 100
    التعتيم: "224561f10229eb9ebbdf05f497132d2b8344d70971c80510eddc607d615ee2a0"

نظرًا لأن receive_utxo تم تعتيمه عند إجراء التحويل، فإن المدفوع rgb-node-0 ليس لديه معلومات حول مكان إرسال 100 USDT، لذا لا يتم عرض الموقع في knownAllocations.

$ rgb0-cli fungible list -l
- genesis: genesis1qyfe883hey6jrgj2xvk5g3dfmfqfzm7a4wez4pd2krf7ltsxffd6u6nrvjvvnc8vt9llmp7663pgututl9heuwaudet72ay9j6thc6cetuvhxvsqqya5xjt2w9y4u6sfkuszwwctnrpug5yjxnthmr3mydg05rdrpspcxysnqvvqpfvag2w8jxzzsz9pf8pjfwf0xvln5z7w93yjln3gcnyxsa04jsf2p8vu4sxgppfv0j9qerppqxhvztpqscnjsxvq5gdfy5v6j3wvpjxxqzcerxuglngnfvpxjkgqusct7cyx8zzezcfpqv3nxjxm2kjj4d0zu0ta6fjmpr8a0calk6h88h4ap5e4nucj0ch07aa73qsh3lj5sd89a32kwy0eq7tsa5zqqjpdqvqq5s46r0
  id: rgb1tadqzve7vwfh39sl6gvqenp8wegsrzreekhhu0dhthx08ppzj9wq8p0je6
  ticker: USDT
  name: USD Tether
  description: ~
  knownCirculating: 1000
  isIssuedKnown: ~
  issueLimit: 0
  chain: testnet
  decimalPrecision: 0
  date: "2022-02-23T20:53:26"
  knownIssues:
    - id: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
      amount: 1000
      origin: ~
  knownInflation: {}
  knownAllocations:
    - nodeId: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
      index: 0
      outpoint: "4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1"
      revealedAmount:
        value: 1000
        blinding: "0000000000000000000000000000000000000000000000000000000000000001"
- الجينيسيس: genesis1qyfe883hey6jrgj2xvk5g3dfmfqfzm7a4wez4pd2krf7ltsxffd6u6nrvjvvnc8vt9llmp7663pgututl9heuwaudet72ay9j6thc6cetuvhxvsqqya5xjt2w9y4u6sfkuszwwctnrpug5yjxnthmr3mydg05rdrpspcxysnqvvqpfvag2w8jxzzsz9pf8pjfwf0xvln5z7w93yjln3gcnyxsa04jsf2p8vu4sxgppfv0j9qerppqxhvztpqscnjsxvq5gdfy5v6j3wvpjxxqzcerxuglngnfvpxjkgqusct7cyx8zzezcfpqv3nxjxm2kjj4d0zu0ta6fjmpr8a0calk6h88h4ap5e4nucj0ch07aa73qsh3lj5sd89a32kwy0eq7tsa5zqqjpdqvqq5s46r0
  الرمز: USDT
  الاسم: USD Tether
  الوصف: -
  العرض المعروف: 1000
  هل تم إصداره بشكل معروف: -
  الحد الأقصى للإصدار: 0
  السلسلة: شبكة الاختبار
  الدقة العشرية: 0
  التاريخ: "2022-02-23T20:53:26"
  المشاكل المعروفة:
    - الهوية: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
      الكمية: 1000
      المصدر: -
  التضخم المعروف: {}
  التخصيصات المعروفة:
    - معرف العقدة: 5c912284f3cc5db73d7eafcd798801517627cc0c18d21f967893633e33015a5f
      الفهرس: 0
      نقطة الخروج: "4c1785210d8930959f530072cffea7f9606e0599b0de9e89aed60f2e9f133893:1"
      الكمية المكشوفة:
        القيمة: 1000
        التعتيم: "0000000000000000000000000000000000000000000000000000000000000001"
    - معرف العقدة: 28f82e2dcfa91282c28a8805ff0c7fde4bd4e0bdbd40c6ba55e191666e45327b
      الفهرس: 0
      نقطة الخروج: "cd66d3b77dfc1c2ecf958847c16a8a1311bba84ee7bf9dd55592a7b97b13028f:1"
      الكمية المكشوفة:
        القيمة: 900
        التعتيم: "ddba9e0efdd614614420fa0b68ecd2d3376a05dd3d809b2ad1f5fe0f6ed75ea2"

## الاستنتاجات

تمكنا من إنشاء أصل قابل للتبادل ونقله من صفقة إلى أخرى بشكل خاص. إذا قمنا بالتحقق من الصفقة المؤكدة في مستكشف الكتل، فلن نجد أي شيء مختلف عن صفقة عادية، وذلك بسبب استخدام RGB للأختام الفريدة للاستفادة من التعديلات في الصفقات. في هذه المقالة، أقدم مقدمة عن كيفية عمل RGB.

قد يحتوي هذا المقال على أخطاء، إذا وجدت أياً منها، يرجى إعلامي لتحسين هذا الدليل. كما أن الاقتراحات والانتقادات مرحب بها، فلنستمتع بالاختراق السعيد! 🖖