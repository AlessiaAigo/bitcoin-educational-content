---
term: TAPROOT
---

Крупное обновление протокола Bitcoin, принятое путем мягкого форка в ноябре 2021 года. Это обновление привносит значительные улучшения в плане конфиденциальности, эффективности и гибкости за счет реализации BIP340, BIP341 и BIP342. Обновление было зафиксировано на блоке 687,284 12 июня 2021 года, когда 90% блоков, сгенерированных за определенный период, подали сигнал в поддержку, тем самым указывая на готовность майнеров активировать обновление (*Speedy Trial*). Активация в итоге произошла на блоке 709,632 14 ноября 2021 года, почти через четыре года после начальных обсуждений по этому вопросу между Питером Виллем, Эндрю Поэлстрой и Грегори Максвеллом. Это была первая крупная попытка обновления с момента спорной активации SegWit в 2017 году.

Taproot также является названием BIP341, реализованного в рамках мягкого форка с тем же названием, который вводит новую модель скрипта под названием P2TR. Скрипт P2TR блокирует биткойны на уникальном общедоступном ключе Шнорра, обозначаемом как $K$. Однако этот ключ $K$ на самом деле является агрегатом общедоступного ключа $P$ и общедоступного ключа $M$, последний из которых рассчитывается из корня Меркля списка `scriptPubKey`. Биткойны, заблокированные с помощью скрипта P2TR, могут быть потрачены двумя различными способами: либо путем публикации подписи для общедоступного ключа $P$, либо путем удовлетворения одного из скриптов, содержащихся в дереве Меркля. Первый вариант называется "*путь ключа*" и второй "*путь скрипта*".