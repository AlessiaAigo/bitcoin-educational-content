---
term: FEE SNIPING
---

Um cenário de ataque no qual mineradores buscam reescrever um bloco recentemente confirmado com o objetivo de reivindicar as taxas de transação que ele contém, enquanto adicionam transações de alta taxa que chegaram enquanto isso no mempool. O objetivo final desse ataque para o minerador é aumentar sua lucratividade. O fee sniping pode se tornar cada vez mais lucrativo à medida que a recompensa por bloco diminui e as taxas de transação representam uma parte maior da receita dos mineradores. Também pode ser vantajoso quando as taxas contidas no bloco anterior são significativamente maiores do que aquelas no próximo melhor bloco candidato. Simplificando, o minerador enfrenta essa escolha em termos de incentivos:
* Minerar de maneira normal seguindo o último bloco, com alta probabilidade de ganhar uma recompensa baixa;
* Tentar minerar um bloco anterior (fee sniping), com baixa probabilidade de ganhar uma recompensa alta.

Este ataque representa um risco para o sistema Bitcoin, pois quanto mais mineradores o adotam, mais outros mineradores, inicialmente honestos, são incentivados a fazer o mesmo. De fato, cada vez que um novo minerador se junta àqueles tentando o fee sniping, a probabilidade de um dos mineradores atacantes ter sucesso aumenta, e a probabilidade de um dos mineradores honestos estender a cadeia diminui em retorno. Se este ataque for realizado massivamente e sustentado ao longo do tempo, as confirmações de bloco não seriam mais um indicador confiável da imutabilidade de uma transação Bitcoin. Isso poderia potencialmente tornar o sistema inutilizável.

Para contrariar esse risco, a maioria dos softwares de carteira preenche automaticamente o campo `nLocktime` de modo que condiciona a validação da transação à inclusão na próxima altura de bloco. Assim, torna-se impossível incluir a transação em uma reescrita do bloco anterior. Se o uso generalizado de `nLocktime` for adotado pelos usuários do Bitcoin, isso reduz significativamente os incentivos para o fee sniping. De fato, incentiva a progressão da blockchain em vez de sua reescrita, reduzindo os lucros potenciais dela. Para transações Taproot, o BIP326 propõe usar o campo `nSequence` de maneira semelhante para alcançar o efeito equivalente do campo `nLocktime` para outros tipos de transações. Esse uso mataria dois coelhos com uma cajadada só, melhorando também a privacidade de protocolos de segunda camada que usam o mesmo campo.