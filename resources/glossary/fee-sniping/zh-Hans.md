---
term: 费用狙击
---

一种攻击场景，其中矿工寻求重写最近确认的区块，以便索取其包含的交易费用，同时添加此期间在内存池中到达的高费用交易。这种攻击的终极目标是为了增加矿工的盈利能力。随着区块奖励的减少和交易费用占矿工收入的比例增加，费用狙击可以变得越来越有利可图。当前一个区块中包含的费用显著高于下一个最佳候选区块中的费用时，这种攻击也可能是有利的。简而言之，矿工在激励方面面临这样的选择：
* 按照最后一个区块的正常方式进行挖矿，有很高的概率赢得低奖励；
* 尝试挖掘前一个区块（费用狙击），有低概率赢得高奖励。

这种攻击对比特币系统构成风险，因为越来越多的矿工采用它，最初诚实的其他矿工也被激励去做同样的事情。实际上，每当有新的矿工加入尝试费用狙击时，攻击矿工成功的概率就会增加，而诚实矿工延长链的概率则会相应减少。如果这种攻击大规模且持续进行，区块确认将不再是比特币交易不可变性的可靠指标。这可能会使系统变得不可用。

为了对抗这种风险，大多数钱包软件会自动填充`nLocktime`字段，使得交易的验证条件是包含在下一个区块高度中。因此，将交易包含在前一个区块的重写中变得不可能。如果比特币用户广泛使用`nLocktime`，它会显著减少费用狙击的激励。实际上，它通过减少从中获得的潜在利润，鼓励区块链的进展而不是重写。对于Taproot交易，BIP326提议以类似方式使用`nSequence`字段，以实现对其他类型交易`nLocktime`字段的等效效果。这种用法一举两得，还通过使用相同的字段改善了二层协议的隐私。