---
term: OP_CHECKSIGADD (0XBA)
---

スタックの上から3つの値を抽出します：`public key`（公開鍵）、`CScriptNum` `n`、そして`signature`（署名）。署名が空のベクトルでなく、有効でない場合、スクリプトはエラーで終了します。署名が有効であるか、空のベクトル（`OP_0`）である場合、2つのシナリオが提示されます：
* 署名が空のベクトルである場合：`n`の値を持つ`CScriptNum`がスタックにプッシュされ、実行が続行されます。
* 署名が空のベクトルでなく、有効である場合：`n + 1`の値を持つ`CScriptNum`がスタックにプッシュされ、実行が続行されます。
簡単に言うと、`OP_CHECKSIGADD`は`OP_CHECKSIG`と似た操作を行いますが、スタックにtrueまたはfalseをプッシュする代わりに、署名が有効である場合はスタックの上から2番目の値に`1`を加算し、署名が空のベクトルを表す場合はこの値を変更せずに残します。`OP_CHECKSIGADD`は、`OP_CHECKMULTISIG`や`OP_CHECKMULTISIGVERIFY`と同じマルチシグネチャポリシーをTapscriptで作成することを可能にしますが、バッチで検証可能な方法で行うため、従来のマルチシグの検証時におけるルックアッププロセスを取り除き、検証を速めるとともに、ノードのCPUにかかる運用負荷を軽減します。このオペコードは、TaprootのニーズのためにTapscriptにのみ追加されました。