---
term: BIP42
---

一项旨在改进比特币核心（Bitcoin Core）的提案，该提案解决了区块奖励减半计划中的一个小错误。如果不纠正这个异常，最终将导致比特币的总产量超过计划的2100万枚上限。具体来说，在减半结束后，理论上在2214年左右，比特币的新一轮创造周期可能会被触发。有问题的核心代码在矿工奖励的值上使用了右二进制移位操作。这个错误源于在C++语言标准中未定义行为的上下文中使用此移位操作。将64位整数（`int64_t`）向右移动超过63位属于未定义行为的范畴。在比特币核心代码中，这种情况可能在64次减半后，即区块高度达到13,440,000时发生。超出这个限制后，位移的行为就没有定义，意味着不同的编译可能会以不同的方式解释代码。这可能导致不可预测的结果，包括创造无限比特币通胀的可能性。BIP42通过要求在64次减半后将区块奖励设置为零来纠正这个问题，从而避免了在未定义行为的上下文中使用右移操作。这一修改是一个软分叉，因此明确了比特币核心代码的行为。尽管这个由BIP42纠正的错误相当严重，但它并不是立即危急的，因为它直到大约2214年才会显现。BIP42由Pieter Wuille在2014年4月1日发布，因此以其幽默的语气而著称。