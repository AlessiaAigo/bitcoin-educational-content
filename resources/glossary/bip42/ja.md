---
term: BIP42
---

Bitcoin Coreを改善するための提案で、ブロック報酬の減少スケジュールにおける小さなバグに対処します。この異常は、修正されなければ、計画された2100万の上限を超えるビットコインの合計作成につながっていた可能性があります。具体的には、半減期の終了後、理論上、約2214年頃に新たなビットコイン作成サイクルが引き起こされる可能性がありました。問題のCoreコードは、マイナーの報酬の値に右ビットシフト演算を使用していました。このバグは、C++言語標準によると未定義の振る舞いがあるコンテキストでこのシフト演算を使用したことに起因しています。64ビット整数（`int64_t`）を63ビット以上右にシフトすることは、この未定義の振る舞いのカテゴリに入ります。Bitcoin Coreのコードでは、これは64回の半減期後、ブロック高さ番号13,440,000で発生していた可能性があります。この限界を超えると、ビットシフトの振る舞いは定義されておらず、異なるコンパイルがコードを異なる方法で解釈する可能性がありました。これは、無限のビットコインインフレーションを作り出す可能性を含む予測不可能な結果につながる可能性がありました。BIP42は、64回の半減期後にブロック報酬をゼロに設定することを義務付けることで、この問題を修正し、未定義の振る舞いのコンテキストで右シフト演算を使用することを避けました。この修正はソフトフォークであり、Bitcoin Coreコードの振る舞いを明確にしました。BIP42によって修正されたこのバグは非常に深刻でしたが、約2214年まで現れなかったため、直ちには重大ではありませんでした。Pieter Wuilleによって2014年4月1日に公開されたBIP42は、そのユーモラスな調子によっても区別されています。