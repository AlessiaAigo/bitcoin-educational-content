---
term: BIP42
---

Предложение по улучшению Bitcoin Core, которое адресует небольшой баг в графике уменьшения вознаграждения за блок. Эта аномалия, если бы она не была исправлена, привела бы к созданию биткоинов в количестве, превышающем запланированный лимит в 21 миллион. В частности, после окончания периодов уменьшения вознаграждения, теоретически мог бы быть запущен новый цикл создания биткоинов примерно в 2214 году. Вопросный код Core использовал операцию бинарного сдвига вправо над значением вознаграждения майнера. Баг проистекал из использования этой операции сдвига в контексте, где поведение было неопределенным согласно стандартам языка C++. Сдвиг 64-битного целого числа (`int64_t`) более чем на 63 бита вправо попадает в эту категорию неопределенного поведения. В коде Bitcoin Core это могло произойти после 64 уменьшений, на высоте блока № 13,440,000. За этим пределом поведение битового сдвига не было определено, что означало, что разные компиляции могли интерпретировать код по-разному. Это могло привести к непредсказуемым результатам, включая возможность создания бесконечной инфляции биткоина. BIP42 исправил эту проблему, предписав установить вознаграждение за блок равным нулю после 64 уменьшений, таким образом избегая использования операции сдвига вправо в контексте неопределенного поведения. Эта модификация, которая была мягким форком, таким образом, уточнила поведение кода Bitcoin Core. Хотя довольно серьезный, этот баг, исправленный BIP42, не был немедленно критичным, так как он не проявил бы себя до примерно 2214 года. Опубликованный 1 апреля 2014 года Питером Вилле, BIP42 таким образом выделяется своим юмористическим тоном.