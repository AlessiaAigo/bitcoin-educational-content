---
term: BIP147
---

BIP147 是 SegWit 软分叉中包含的一个提案，旨在解决与 `OP_CHECKMULTISIG` 和 `OP_CHECKMULTISIGVERIFY` 操作消耗的哑元素相关的可变性向量问题。由于历史上的一个偏差一错误（单位移位错误），这两个操作码会从堆栈中移除一个额外的元素，超出它们的基本功能。因此，为了避免错误，必须在 `scriptSig` 的开始处包含一个哑值，以满足移除操作并绕过该错误。这个值是不必要的，但它必须存在，以使脚本有效。BIP11 引入了 P2MS 标准，建议将 `OP_0` 作为不必要的值。然而，这个标准在共识规则层面上并未强制执行，意味着任何值都可以放在那里，而不会使交易无效。这就是 `OP_CHECKMULTISIG` 和 `OP_CHECKMULTISIGVERIFY` 包含一个可变性向量的原因。BIP147 引入了一个新的共识规则，名为 `NULLDUMMY`，要求这个哑元素必须是一个空字节数组（`OP_0`）。任何其他值都会导致脚本评估立即失败。这一变更适用于 pre-SegWit 脚本以及 P2WSH 脚本，并且需要一个软分叉。