---
term: P2TR
---

P2TR significa *Pay to Taproot*, que é um modelo padrão de script usado para estabelecer condições de gasto em um UTXO (Unspent Transaction Output - Saída de Transação Não Gasta). Foi introduzido com a implementação do Taproot em novembro de 2021. O P2TR utiliza o protocolo Schnorr para agregar chaves criptográficas, bem como árvores Merkle para scripts alternativos, conhecidos como MAST (*Merkelized Alternative Script Tree* - Árvore de Script Alternativo Merkelizada). Diferentemente das transações tradicionais, onde as condições de gasto são expostas publicamente (às vezes no momento do recebimento, às vezes no momento do gasto), o P2TR permite ocultar scripts complexos atrás de uma única chave pública aparente.

Tecnicamente, um script P2TR bloqueia bitcoins em uma chave pública Schnorr única, denotada como $K$. No entanto, essa chave $K$ é na verdade um agregado de uma chave pública $P$ e uma chave pública $M$, sendo esta última calculada a partir da raiz Merkle de uma lista de `scriptPubKey`. Os bitcoins bloqueados com um script P2TR podem ser gastos de duas maneiras distintas: ou publicando uma assinatura para a chave pública $P$, ou satisfazendo um dos scripts contidos na árvore Merkle. A primeira opção é chamada de "*caminho da chave*" e a segunda, de "*caminho do script*".

Assim, o P2TR permite que os usuários enviem bitcoins tanto para uma chave pública quanto para múltiplos scripts de sua escolha. Outra vantagem desse script é que, embora existam várias maneiras de gastar uma saída P2TR, apenas a que é usada precisa ser revelada no momento do gasto, permitindo que as alternativas não utilizadas permaneçam privadas. P2TR é uma saída SegWit versão 1, o que significa que as assinaturas para entradas P2TR são armazenadas no testemunha de uma transação, e não no `scriptSig`. Os endereços P2TR usam uma codificação `Bech32m` e começam com `bc1p`.