---
term: P2TR
---

P2TRは*Pay to Taproot*を意味し、UTXO（未使用トランザクションアウトプット）に支出条件を設定するために使用される標準的なスクリプトモデルです。これは2021年11月のTaprootの実装とともに導入されました。P2TRは、暗号鍵を集約するためにSchnorrプロトコルを利用し、また、MAST（*Merkelized Alternative Script Tree*、マークル化された代替スクリプトツリー）として知られる代替スクリプトのためにマークルツリーを使用します。従来のトランザクションでは支出条件が公開されることがあります（受け取り時または支出時のいずれか）、P2TRでは複雑なスクリプトを単一の公開鍵の背後に隠すことができます。

技術的には、P2TRスクリプトはユニークなSchnorr公開鍵にビットコインをロックします。この鍵$K$は実際には公開鍵$P$と、`scriptPubKey`のリストのマークルルートから計算される公開鍵$M$の集約です。P2TRスクリプトでロックされたビットコインは、公開鍵$P$に対する署名を公開するか、マークルツリーに含まれるスクリプトのいずれかを満たすことによって、2つの異なる方法で支出することができます。最初のオプションは"*key path*"と呼ばれ、2番目のオプションは"*script path*"と呼ばれます。

したがって、P2TRはユーザーがビットコインを公開鍵または選択した複数のスクリプトに送ることを可能にします。このスクリプトのもう一つの利点は、P2TRアウトプットを支出する方法が複数あるにもかかわらず、使用されるもののみが支出時に明らかにされ、使用されなかった代替案がプライベートのままでいられることです。P2TRはバージョン1のSegWitアウトプットであり、P2TR入力の署名はトランザクションの証人部分に格納され、`scriptSig`には格納されません。P2TRアドレスは`Bech32m`エンコーディングを使用し、`bc1p`で始まります。