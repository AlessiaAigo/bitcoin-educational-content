---
术语：输出脚本描述符
---

输出脚本描述符，或简称为描述符，是结构化的表达式，完整地描述了一个输出脚本（`scriptPubKey`），并提供了追踪特定脚本的交易所需的所有必要信息。这些描述符通过对使用的地址结构和类型的标准描述，促进了HD钱包中密钥的管理。

描述符的主要兴趣在于它们能够将恢复钱包所需的所有基本信息封装在单个字符串中（除了恢复短语之外）。通过保存与对应的助记词短语相匹配的描述符，可以恢复不仅是私钥，还包括钱包的精确结构和相关脚本参数。实际上，恢复一个钱包不仅需要知道初始种子，还需要特定的派生子密钥对的索引，以及在多签钱包的情况下每个因素的`xpub`。以前，人们假设这些信息是所有人都隐含知道的。然而，随着脚本的多样化和更复杂配置的出现，这些信息可能变得难以推断，从而将这些数据变成私有且难以暴力破解的信息。使用描述符极大地简化了过程：只需知道恢复短语和相应的描述符，就可以可靠且安全地恢复一切。

描述符由几个元素组成：
* 脚本函数，如`pk`（支付到公钥），`pkh`（支付到公钥哈希），`wpkh`（支付到见证公钥哈希），`sh`（支付到脚本哈希），`wsh`（支付到见证脚本哈希），`tr`（支付到Taproot），`multi`（多签名），和`sortedmulti`（排序键的多签名）；
* 派生路径，例如，`[d34db33f/44h/0h/0h]`表示一个派生路径和一个特定的主密钥指纹；
* 各种格式的密钥，如十六进制公钥或扩展公钥（`xpub`）；
* 一个校验和，由一个哈希值前置，用于验证描述符的完整性。

例如，一个P2WPKH钱包的描述符可能看起来像：

```text
wpkh([cdeab12f/84h/0h/0h]xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17
C1TjvMt7DJ9Qve4dRxm91CDv6cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U/<0;1>/*)#jy0l7n
r4
```
在这个描述符中，派生函数`wpkh`表示一个支付到见证公钥哈希的脚本类型。其后是包含以下内容的派生路径：
* `cdeab12f`：主密钥的指纹；
* `84h`：表示使用BIP84目的，用于SegWit v0地址；
* `0h`：表示这是主网上的BTC货币；
* `0h`：指的是钱包中使用的特定账户号码。

描述符还包括在这个钱包中使用的扩展公钥：
xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17C1TjvMt7DJ9Qve4dRxm91CDv6cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U

接下来，符号`/<0;1>/*`指定描述符可以从外部链（`0`）和内部链（`1`）生成地址，采用通配符（`*`）允许以可配置的方式顺序派生多个地址，类似于在传统钱包软件上管理“间隔限制”。

最后，`#jy0l7nr4`代表用于验证描述符完整性的校验和。